<div layout="row">

 <div flex="5"></div>
<!--CONTENT -->
 <div
    flex="75"
    layout="column" layout-align='center center'>


<!--SLIDER-->
<div ng-include="root.blueprintTemplateDir + 'slider.html'"></div>

<div ng-if="loading"
    ng-include="root.templateDir + 'loader.html'"></div>

<div ng-if="!loading">
<div style="padding-top: 50px;"></div>

<!-- REPEATS -->
  <div ng-repeat="section in sections track by $index"
    ng-cloak
    id='step{{$index}}'
    style="padding-bottom: 100px;"
    class="section scrollspy" scrollspy>

   <div style="position: relative; height: 480px;">

    <!-- IMAGE (with link) -->
    <div style="
        background-repeat: no-repeat;
        background-size: 100% 100%; /* background-size:cover; */
        width: 950px; height: 470px;
        z-index:1; "
        ng-style="{'background-image':'url('+
        root.imagesPath + welcome.mainSubFolder + section.images[0].filename
        +')'}"
        ></div>

    <!-- TITLE BACKGROUND COLOR? -->
    <div style=" position: absolute; bottom: 10px;
        background-color: {{ section.data['Color'] || defaultColor }};
        width: 100%;
        height: 140px;
        opacity: .5;
        z-index:2;">
        </div>

    <div style=" position: absolute; bottom: 0px;
        padding-left: 5%; color: white;
        width: 100%;
        z-index:3;">
        <a href ui-sref="{{section.link}}" style="color: white;">
        <!-- TITLE -->
        <h2 class="header" style='font-family: Leela;'>
            {{ section.data['Section'].capitalizeFirstLetter() }} </h2>
        <!-- DESCRIPTION -->
        <p ng-if="section.data['Description'].trim() == ''">&nbsp;</p>
        <p ng-if="section.data['Description'].trim() != ''"
            ng-bind-html="section.data['Description']"></p>
        </a>
    </div>
   </div>

<!-- SEARCH CASE? Didn't perceive it very good.
    <md-content
        ng-if="welcome.isSearch(section)"
        layout-padding layout-wrap>
            <div layout="row" layout-align="center center">
                <input placeholder="{{section.data['Content']}}"
                    ng-focus="activateSearch()">
                <i class="material-icons prefix">search</i>
            </div>
    </md-content>
-->

<!-- More
    <md-content flew="100"
        ng-if="!welcome.isSearch(section) && section.data['Content'] != ''"
        layout="row" layout-align="end center">
        <md-button class="md-warn">
          <a ui-sref="welcome.more(
            {element: $index, section_type: 'welcome'})">more...</a>
        </md-button>
    </md-content>
-->

<!-- Parallax
    <md-content layout-padding layout-wrap></md-content>
    <div class="parallax-container"
        ng-if="section.images && section.images.length > 0">
        <div parallax>
          <img lazy-img="{{ root.imagesPath
            + welcome.mainSubFolder + section.images[0].filename}}"
            class="z-depth-1">
        </div>
    </div>
-->

  </div>

</div> <!-- loader -->
</div> <!-- flex -->

 <div flex="5"></div>
<!-- SIDE MENU -->
 <div ng-if="sections.length > 1"
    flex="15" pushpin pushpin-offset="1">

  <ul class="section table-of-contents">
    <li ng-repeat="section in sections track by $index">
      <a href="#step{{$index}}"> {{section.data['Section']}} </a>
    </li>
  </ul>
 </div>

</div>