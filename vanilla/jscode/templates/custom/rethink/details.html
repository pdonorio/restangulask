<div ng-controller="ToastController as toast" >
 <div ng-controller="DetailsController as detail" >

            <md-button>
                <a ui-sref='public.fastsearch({text: detail.query})'
                    layout='row' layout-align="center center">
                    <i class="material-icons prefix">arrow_back</i> Retour
                </a>
            </md-button>

  <div ng-if="detail.load" ng-include="root.templateDir+'loader.html'"></div>
  <div ng-if='detail.data' layout="column">
      <div ng-hide="detail.data.id"> No data... </div>

 <div layout="column" layout-padding>
    <h3> NOTICE DETAILLEE:
    <b>
        {{detail.refinedData["Extrait"]["Numero de l'extrait"]}}
    </b>
    </hr>
    </h3>
 </div>

  <div layout="row" layout-padding>
   <div flex="65" ng-if="detail.data.id">

      <div>
        <span>
        <b>Fête</b>: {{detail.refinedData["Fête"]["Titre abrégé"]}}
        <br>
        <b>Source</b>: {{detail.refinedData["Source"]["Titre abrégé"]}}
        </span>
      </div>

      <div layout="row">
          <md-content flex="20" layout-padding layout-wrap
            ng-if="detail.previous.link">
                <a href layout="row" layout-align="center center"
                    ui-sref="public.details({id: detail.previous.link})">
                    <i class="material-icons">keyboard_arrow_left</i>
                    {{detail.previous.text}}
                </a>
          </md-content>
          <div flex="60"></div>
          <md-content flex="20" layout-padding layout-wrap
            ng-if="detail.next.link">
                <a href layout="row" layout-align="center center"
                    ui-sref="public.details({id: detail.next.link})">
                    {{detail.next.text}}
                    <i class="material-icons">keyboard_arrow_right</i>
                </a>
          </md-content>
      </div>

      <div layout="row">

        <div flex=50 style="text-align: center;">
            <a ng-if="detail.data.images[0].filename"
                href="/zoom/{{ detail.data.id }}/{{ detail.data.images[0].code }}"
                target="_blank">
             <img tooltipped data-position="right" data-delay="50"
                data-tooltip="Click to zoom this image"
                height=500
                ng-src="/static/uploads/{{detail.data.images[0].filename}}">
            </a>
            <div ng-if="!detail.data.images[0].filename">
                Image indisponible
                <br>
                <i class="material-icons">collections</i>
            </div>
        </div>

<!-- IMAGE TEXT -->
        <div flex=50 layout="column" layout-align="start center">

            <div ng-if="detail.languages.length > 1">
              <md-input-container>

                <!-- <label>Languages</label> -->

                <md-select
                    aria-label="languages"
                    ng-model="detail.selected_language"
                    md-on-close="detail.selectLanguage()" >
                  <md-optgroup label="languages">
                    <md-option ng-value="item"
                        ng-repeat="item in detail.languages"
                        >{{item}}</md-option>
                  </md-optgroup>
                </md-select>
              </md-input-container>
            </div>

            <div ng-bind-html="detail.current_text"></div>
        </div>
<!-- IMAGE TEXT -->
     </div>

  </div> <!-- END OF 65 -->

  <div flex="5"></div>

  <div flex="30" layout="column" layout="center end"
    class="rounder nospaces fullheight teal lighten-4"
    style="padding-top: 15px; padding-bottom: 15px;"
    >

<div class="nospaces">
    <table class="smalltext">

     <thead> <tr> <td colspan="2">
        <h5> DÉTAILS DE LA PAGE </h5>
        </td> </tr> </thead>
      <tbody ng-init="key='Détails'">
        <tr ng-init="field1='Personnages'"
            ng-show='detail.refinedData[key][field1]'>
          <th width="35%"> {{ field1 }} </th>
          <td> {{detail.refinedData[key][field1]}} </td>
        </tr>
        <tr ng-init="field2='Temps'"
            ng-show='detail.refinedData[key][field2]'>
          <th width="35%"> {{ field2 }} </th>
          <td> {{detail.refinedData[key][field2]}} </td>
        </tr>
        <tr ng-init="field3='Actions'"
            ng-show='detail.refinedData[key][field3]
            || detail.refinedData[key][field3 + " libres"]'>
          <th width="35%"> {{ field3 }} </th>
          <td>
            {{detail.refinedData[key][field3]}}
            , {{detail.refinedData[key][field3 + ' libres']}}
          </td>
        </tr>
        <tr ng-init="field4='Apparato'"
            ng-show='detail.refinedData[key][field4]
            || detail.refinedData[key][field4 + " libre"]'>
          <th width="35%"> {{ field4 }} </th>
          <td>
            {{detail.refinedData[key][field4]}}
            , {{detail.refinedData[key][field4 + ' libre']}}
          </td>
        </tr>
      </tbody>


     <thead> <tr> <td colspan="2">
        <h5> FÊTE </h5>
        </td> </tr> </thead>
      <tbody ng-init="key2='Fête'">
        <tr ng-init="field11='Titre abrégé'"
            ng-show='detail.refinedData[key2][field11]'>
          <th width="35%"> {{ field11 }} </th>
          <td> {{detail.refinedData[key2][field11]}} </td>
        </tr>
        <tr ng-init="field12='Date'"
            ng-show='detail.refinedData[key2][field12]'>
          <th width="35%"> {{ field12 }} </th>
          <td>
            <div ng-show='detail.refinedData.date'>
            {{
            detail.refinedData[key2]["Date de début de la fête"]
            | date:'dd/MM'
            }}
            -
            {{
            detail.refinedData[key2]["Date de la fin de la fête"]
            | date:'dd/MM'
            }}
            ,
            </div>
            {{detail.refinedData[key2][field12]}}
            </td>
        </tr>
        <tr ng-init="field13='Lieu'"
            ng-show='detail.refinedData[key2][field13]'>
          <th width="35%"> {{ field13 }} </th>
          <td> {{detail.refinedData[key2][field13]}} </td>
        </tr>
        <tr ng-init="field14='Notes'"
            ng-show='detail.refinedData[key2][field14]'>
          <th width="35%"> {{ field14 }} </th>
          <td> {{detail.refinedData[key2][field14]}} </td>
        </tr>

      </tbody>


     <thead> <tr> <td colspan="2">
        <h5> SOURCE </h5>
        </td> </tr> </thead>
      <tbody ng-init="key3='Source'">
        <tr ng-init="field21='Type de source'"
            ng-show='detail.refinedData[key3][field21]'>
          <th width="35%"> {{ field21 }} </th>
          <td> {{detail.refinedData[key3][field21]}} </td>
        </tr>
        <tr ng-init="field22='Titre'"
            ng-show='detail.refinedData[key3][field22]'>
          <th width="35%"> {{ field22 }} </th>
          <td> {{detail.refinedData[key3][field22]}} </td>
        </tr>
        <tr ng-init="field23='Noms'"
            ng-show='detail.refinedData[key3][field23]'>
          <th width="35%"> {{ field23 }} </th>
          <td> {{detail.refinedData[key3][field23]}} </td>
        </tr>
        <tr ng-init="field24='Edition'">
          <th width="35%"> {{ field24 }} </th>
          <td> {{detail.refinedData[key3]["Lieu d'édition"]}},
          {{detail.refinedData[key3]["Année"]}} </td>
        </tr>
        <tr ng-init="field25='Format'">
          <th width="35%"> {{ field25 }} </th>
          <td>
            {{detail.refinedData[key3]["Dimensions"]}};
            {{detail.refinedData[key3]["Nombre de pages/folio"]}};
            {{detail.refinedData[key3]["Nombre d'illustrations"]}}
          </td>
        </tr>
        <tr ng-init="field26='Cote'"
            ng-show='detail.refinedData[key3][field26]'>
          <th width="35%"> {{ field26 }} </th>
          <td> {{detail.refinedData[key3][field26]}} </td>
        </tr>
        <tr ng-init="field27='Notes'"
            ng-show='detail.refinedData[key3][field27]'>
          <th width="35%"> {{ field27 }} </th>
          <td> {{detail.refinedData[key3][field27]}} </td>
        </tr>
      </tbody>

     <thead ng-init="field31='Sources'"
           ng-show='detail.refinedData[key2][field31]'>
       <tr> <td colspan="2">
        <h5> AUTRES SOURCES LIEES </h5>
        </td> </tr> </thead>
      <tbody
           ng-show='detail.refinedData[key2][field31]'>
        <tr>
          <td colspan="2"> {{detail.refinedData[key2][field31]}} </td>
        </tr>
      </tbody>

     <thead
           ng-show='detail.refinedData[key2][field31]'>
    <tr> <td colspan="2">
        <h5> DÉTAILS DE LA FÊTE </h5>
        </td> </tr> </thead>
      <tbody
           ng-show='detail.refinedData[key2][field31]'>
        <tr>
          <td colspan="2"> {{detail.refinedData[key2][field31]}} </td>
        </tr>
      </tbody>

<!--
     <thead> <tr> <td colspan="2">
        <h5> <u> {{name}} </u> </h5>
        </td> </tr> </thead>
      <tbody>
        <tr ng-if='value' ng-repeat='(key, value) in rows'>
          <th width="35%"> {{ key }} </th>
          <td ng-if="name == 'Extrait' && key.indexOf('ero de l') >= 0">
            <b> <i>{{ value }}</i> </b> </td>
          <td ng-if="!(name == 'Extrait' && key.indexOf('ero de l') >= 0)"> {{ value }} </td>
        </tr>
      </tbody>
-->

    </table>
</div>


      </div>
  </div> <!-- END OF COLUMN -->

 </div> <!-- END OF DATA -->
</div>

</div>
