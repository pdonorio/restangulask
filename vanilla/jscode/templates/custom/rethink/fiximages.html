<div ng-controller='ToastController as toasting'>

<div
    ng-controller="FixImagesController as fix"
    style="padding-top: 20px;"
    layout="row" layout-align="center start"
    >

<!-- LOADER OR NO DATA -->
    <div ng-if="!parties">
        <div ng-include="root.templateDir + 'loader.html'"></div>
    </div>

<!-- LIST -->
    <div ng-if="parties"
        flex-xs flex-gt-xs="55" layout="column">
     <div ng-if="partiesElements == 0">
        No data available
     </div>
     <md-list>
      <div ng-repeat="(party, data) in parties track by $index">
          <md-divider></md-divider>
          <md-list-item class="md-2-line"
              ng-click="fix.noImageList(party, data)">
            <div class="md-list-item-text" layout="column">
              <h3>{{party}}</h3>
              <p> Elements: <b>{{data.length}}</b> </p>
            </div>
          </md-list-item>
      </div>
     </md-list>
    </div>

<!-- CARD -->
    <div flex-xs flex-gt-xs="45" layout="column"
        ng-show="fix.elements">
     <md-card>
      <md-card-title>
        <md-card-title-text>
            <h5>{{fix.currentParty}}</h5>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <table class="table table-hover">
          <tbody>
            <tr ng-repeat="element in fix.elements">
             <td> {{element.value}} </td>
             <td> <a href
                 ng-click="fix.uploaderDialog(element.record, element.value)"
           tooltipped data-position="left" data-delay="50"
           data-tooltip="Upload the image"
                 class="waves-effect waves-light btn-floating lime lighten-2">
                   <i class="material-icons blue-grey-text"> publish </i> </a>
             </td>
             <td> <a ui-sref='public.fastsearch({text: element.value})'
           tooltipped data-position="down" data-delay="50"
           data-tooltip="Search this record"
                 class="waves-effect waves-light btn-floating lime lighten-3">
                   <i class="material-icons blue-grey-text"> youtube_searched_for </i> </a>
             </td>
             <td> <a ui-sref='public.details({id: element.record})'
           tooltipped data-position="up" data-delay="50"
           data-tooltip="View details of this record"
                 class="waves-effect waves-light btn-floating lime lighten-3">
                   <i class="material-icons blue-grey-text">web</i> </a>
             </td>
            </tr>
          </tbody>
        </table>
      </md-card-content>
      <md-card-actions layout="row" layout-align="start center">
        <md-button ng-click="fix.closeCard()"> Close </md-button>
      </md-card-actions>
     </md-card>
    </div>

</div>
</div>